I"¡J<p>In this blog, weâ€™re going to explore how JavaScript uses constructors as blueprints for the creation of many new objects, and prototypes for adding methods to objects.</p>

<p>Letâ€™s start by taking a look at how some of the built-in JavaScript objects work.</p>

<h2 id="goal">Goal</h2>

<p>Follow along to learn:</p>

<ul>
  <li>What Constructors and prototypes are and how they work</li>
  <li>How Constructors use prototypes to have access to methods</li>
</ul>

<h2 id="constructors">Constructors</h2>

<p>If we look at the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">MDN documentation for String</a>, we see that <code class="highlight__code">String</code> is a constructor for creating string objects. A <strong>constructor</strong> is a function that can be invoked using the <code class="highlight__code">new</code> keyword to create new objects. To visually identify constructor functions vs. regular functions, they are conventionally named with a capital first letter.</p>

<p>You might have created string variables by adding <code>""</code> around the characters we want to identify as strings. This is called <strong>literal notation</strong>. It triggers JavaScript to â€˜boxâ€™ (wrap) primitive values so you have access to String methods. But we could also use the String constructor function directly:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">let</span> <span class="nx">testGreeting</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">String</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">testGreeting</span><span class="p">);</span>
  <span class="c1">// StringÂ {"", length: 0}</span>
  <span class="c1">// length: 0</span>
  <span class="c1">// __proto__: String</span>
  <span class="c1">// [[PrimitiveValue]]: ""</span>
</code></pre></div></div>

<p>Or this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">let</span> <span class="nx">testGreeting2</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hello!</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">testGreeting2</span><span class="p">);</span>
  <span class="c1">// StringÂ {"Hello!"}</span>
  <span class="c1">// 0: "H"</span>
  <span class="c1">// 1: "e"</span>
  <span class="c1">// 2: "l"</span>
  <span class="c1">// 3: "l"</span>
  <span class="c1">// 4: "o"</span>
  <span class="c1">// 5: "!"</span>
  <span class="c1">// length: 6</span>
  <span class="c1">// __proto__: String</span>
  <span class="c1">// [[PrimitiveValue]]: "Hello!"</span>
</code></pre></div></div>

<p>In these two examples, we see the String constructor is called with the <code class="highlight__code">new</code> keyword. The String constructor function added 2 properties to both objects - <code class="highlight__code">length</code> and <code class="highlight__code">[[PrimitiveValue]]</code>. For <code class="highlight__code">testGreeting2</code>, where we provided a value as the argument, the constructor also added properties for the index positions of each character.</p>

<p>In the case of creating a <code class="highlight__code">new String</code>, it was actually easier to use the literal notation. But with more complex objects it will often be easier to use constructors when creating new objects that all have the same blueprint.</p>

<p>Letâ€™s make a constructor of our own. Weâ€™ll imagine that we need to create many cats from a cat blueprint since we know that all cats will have the same properties. The difference from cat to cat will be in the values for those properties. Rather than repeating all of the code for each cat, weâ€™ll make a constructor function that we can use over and over again.</p>

<p>Here is a constructor function for <span class="highlight__code">Cat</span> that will initialize a new cat object with its properties assigned to the values passed in to the constructor function.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">function</span> <span class="nx">Cat</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">colors</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">colors</span> <span class="o">=</span> <span class="nx">colors</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>Then to create a new cat we can do the following:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">let</span> <span class="nx">myCat</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cat</span><span class="p">(</span><span class="dl">'</span><span class="s1">Lanky</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">white</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">black</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">gold</span><span class="dl">'</span><span class="p">],</span> <span class="mi">1</span><span class="p">);</span>
</code></pre></div></div>

<p>We can access the name of the new cat:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">myCat</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
  <span class="c1">// "Lanky"</span>
</code></pre></div></div>

<p>The colors of the new cat:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">myCat</span><span class="p">.</span><span class="nx">colors</span><span class="p">);</span>
  <span class="c1">// ["white","black", "gold"]</span>
</code></pre></div></div>

<p>And its age:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">myCat</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
  <span class="c1">// 1</span>
</code></pre></div></div>

<p>The <code class="highlight__code">myCat</code> object here is considered an <strong>instance</strong> of the <span class="highlight__code">Cat</span> type. A constructor is the blueprint that specifies how to create an object. You can think of the <span class="highlight__code">Cat</span> constructor here as a factory that can be used repeatedly to build a bunch of cat objects, using the constructor as a blueprint. Each cat object is an <em>instance</em> of the <span class="highlight__code">Cat</span> type, so you have one <span class="highlight__code">Cat</span> type, defined by a constructor, with potentially many instances of that type.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">function</span> <span class="nx">Cat</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">colors</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">colors</span> <span class="o">=</span> <span class="nx">colors</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">let</span> <span class="nx">growly</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dog</span><span class="p">(</span><span class="dl">"</span><span class="s2">Growly</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">gray</span><span class="dl">"</span><span class="p">],</span> <span class="mi">2</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">genter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dog</span><span class="p">(</span><span class="dl">"</span><span class="s2">Genter</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">white</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">black</span><span class="dl">"</span><span class="p">],</span> <span class="mi">5</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">duck</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dog</span><span class="p">(</span><span class="dl">"</span><span class="s2">Duck</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">orange</span><span class="dl">"</span><span class="p">],</span> <span class="mi">3</span><span class="p">);</span>
</code></pre></div></div>

<p>To recap, the <span class="highlight__code">Cat</span> constructor above is used as a kind of factory or blueprint by each of the three lines below in order construct the three cat objects. The growly, genter and duck objects are three instances of the <span class="highlight__code">Cat</span> type. Each object that is an instance of <span class="highlight__code">Cat</span> has a name property, a colors property and an age property. For example:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">growly</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
  <span class="c1">// "Growly"</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">genter</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
  <span class="c1">// "Genter"</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">genter</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
  <span class="c1">// 5</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">duck</span><span class="p">.</span><span class="nx">colors</span><span class="p">);</span>
  <span class="c1">// ["orange"]</span>
</code></pre></div></div>

<p>Now, we know how to create new objects with properties, but what about an objectâ€™s methods? Letâ€™s take a look at methods for String and Cat next.</p>

<h2 id="prototypes">Prototypes</h2>

<p>We know that JavaScript also has a number of built-in string methods for each new String created. When we show our <code class="highlight__code">testGreeting2</code>, those methods are not listed in the curly braces. This is because the constructor function is only used to create a new objectâ€™s properties.</p>

<p>To define methods, JavaScript uses prototypes. If we look at the methods for <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String on MDN</a> again, we see that they are all listed with the notation, String.prototype. A <strong>prototype</strong> is just an object from which other objects inherit methods. So, all instances of the String constructor inherit from the String.prototype (just as all instances of Cat will inherit from Cat.prototype). When you call a method, JavaScript first looks at the methods on the object, and if it doesnâ€™t find them there, it looks to the prototype.</p>

<p>Letâ€™s take a look at how this works with our <code class="highlight__code">testGreeting2</code> string object.</p>

<p>We can run any of the <code class="highlight__code">String.prototype</code> methods on the string <code class="">testGreeting2</code> which currently has a value of <code class="highlight__code">"Hello!"</code>. Letâ€™s try <code class="highlight__code">toUpperCase</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> <span class="nx">testGreeting2</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
<span class="c1">// HELLO!</span>
</code></pre></div></div>

<p>When we execute this, JavaScript first searches the properties of the <code class="highlight__code">testGreeting2</code> object. It doesnâ€™t find it. It then goes to the <code class="highlight__code">String.prototype</code> object, finds the <code class="highlight__code">toUpperCase</code> method there, and processes the function as requested.</p>

<p>Letâ€™s add a custom method to <code class="highlight__code">String.prototype</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addExclamations</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">!!!!!</span><span class="dl">"</span>
  <span class="p">};</span>
  <span class="nx">testGreeting2</span><span class="p">.</span><span class="nx">addExclamations</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">testGreeting2</span><span class="p">);</span>
  <span class="c1">// Hello!!!!!!</span>
</code></pre></div></div>

<p>As soon as the new method is added, all current and future instances of String will have access to it. Now I can run <code class="highlight__code">testGreeting2.addExclamations()</code> and get <code class="highlight__code">Hello!!!!!!</code>.</p>

<p>If I create a new string, it, too, will have access to the prototypeâ€™s <code class="highlight__code">addExclamations</code> method:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">let</span> <span class="nx">newGreeting</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Hola</span><span class="dl">"</span><span class="p">;</span>
  <span class="nx">newGreeting</span><span class="p">.</span><span class="nx">addExclamations</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">newGreeting</span><span class="p">);</span>
  <span class="c1">// Hola!!!!!</span>
</code></pre></div></div>

<p>We might think, why wouldnâ€™t methods just be added to the constructor instead of having a separate prototype object? If all methods were added to the constructor, EVERY new instance of an object would create additional functions for EVERY method. By adding them to a shared prototype, the functions are created once and shared by all of the instances, which is more efficient.</p>

<p>Letâ€™s look at our <code class="highlight__code">Cat</code> again. We can add our original methods to the <code class="highlight__code">Cat.prototype</code> so that all cats have these behaviors available to them.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Cat</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">speak</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Meow!</span><span class="dl">"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code class="highlight__code">myCat</code> can now speak:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">myCat</span><span class="p">.</span><span class="nx">speak</span><span class="p">();</span>
  <span class="c1">// Meow!</span>
</code></pre></div></div>

<p>Every new cat will also have these methods.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">let</span> <span class="nx">kitty</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cat</span><span class="p">(</span><span class="dl">"</span><span class="s2">Kitty</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">grey, white</span><span class="dl">"</span><span class="p">],</span> <span class="mi">2</span><span class="p">);</span>
  <span class="nx">kitty</span><span class="p">.</span><span class="nx">speak</span><span class="p">();</span>
  <span class="c1">// Meow!</span>
</code></pre></div></div>

<h2 id="conclusion">Conclusion</h2>

<p>Every time we create a new cat using the <code class="highlight__code">new</code> keyword, it calls the <span class="highlight__code">Cat</span> constructor, which provides the blueprint for creating an instance of the Cat type, giving it certain properties. The new instance of the Cat type also automatically gains access to all methods defined on the shared Cat prototype.</p>
:ET