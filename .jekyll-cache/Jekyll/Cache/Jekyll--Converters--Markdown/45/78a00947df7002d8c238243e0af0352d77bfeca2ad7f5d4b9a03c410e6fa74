I"p<h2 id="what-is-the-problem">what is the problem</h2>

<p>When making a request to your backend that uses Passport you need to be able to pass cookies from a frontend server to a backend server because passport creates a session that requires cookies to be sent and received.</p>

<p>Many packages like create-react-app and Vue CLI creates a server that loads your frontend. This could cause some issue when making cross origin HTTP request using Passport for authentication.</p>

<p>The problem usually lies in the configuration for your HTTP request.</p>

<h2 id="solution">solution</h2>

<h3 id="using-fetch">using fetch</h3>

<p>When using fetch it takes in a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#Supplying_request_options">init object</a> where you can control different settings.</p>

<p>The setting that is going to be used is the <code class="highlight__code">credentials</code> settings because it will allow the fetch method to send and receive cookies from a server.</p>

<p>We will need to set the credentials setting to ‘includes’ this allow you receive and send cookies or any other credentials with every request made to a different server.</p>

<p>Here is an example of how it would look like.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fetch</span><span class="p">(</span><span class="nx">BACKEND_URL</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/note</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">credentials</span><span class="p">:</span> <span class="dl">'</span><span class="s1">include</span><span class="dl">'</span>
<span class="p">});</span>
</code></pre></div></div>

<p>This is a real example where I am fetching all notes a user has created.</p>

<h2 id="conclusion">conclusion</h2>

<p>If you are having trouble fetching data from your backend that is being authenticated by cookies or passport.js make sure you have the correct configuration with fetch or any other method you are using to make the HTTP request.</p>

:ET